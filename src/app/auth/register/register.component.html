<!-- register.component.html -->
<div class="page-container">
    <div class="register-container">
      <!-- En-tête -->
      <div class="register-header">
        <img src="assets/images/ins-logo.png" alt="Logo INS" class="ins-logo">
        <h2>مرحبا بكم في المعهد الوطني للإحصاء</h2>
        <p class="subtitle">Institut National de la Statistique</p>
      </div>
  
      <form [formGroup]="registerForm" >
        <!-- Informations de l'entreprise -->
        <div class="form-section">
          <div class="section-header">
            <i class="fas fa-building"></i>
            <h3>Informations de l'entreprise</h3>
          </div>
  
          <div class="form-grid">
            <div class="form-group">
              <label for="companyName">
                <i class="fas fa-briefcase"></i>
                Nom de l'entreprise
              </label>
              <input
                type="text"
                id="companyName"
                formControlName="companyName"
                class="form-control"
                [ngClass]="{ 'is-invalid': submitted && f['companyName'].errors }"
                placeholder="Saisissez le nom de l'entreprise"
              />
              <div *ngIf="submitted && f['companyName'].errors" class="invalid-feedback">
                <div *ngIf="f['companyName'].errors['required']">Le nom de l'entreprise est requis</div>
              </div>
            </div>
  
            <div class="form-group">
              <label for="companyAddress">
                <i class="fas fa-map-marker-alt"></i>
                Adresse
              </label>
              <input
                type="text"
                id="companyAddress"
                formControlName="companyAddress"
                class="form-control"
                [ngClass]="{ 'is-invalid': submitted && f['companyAddress'].errors }"
                placeholder="Adresse complète"
              />
              <div *ngIf="submitted && f['companyAddress'].errors" class="invalid-feedback">
                <div *ngIf="f['companyAddress'].errors['required']">L'adresse est requise</div>
              </div>
            </div>
  
            <div class="form-group">
              <label for="companyEmail">
                <i class="fas fa-envelope"></i>
                Email de l'entreprise
              </label>
              <input
                type="email"
                id="companyEmail"
                formControlName="companyEmail"
                class="form-control"
                [ngClass]="{ 'is-invalid': submitted && f['companyEmail'].errors }"
                placeholder="email@entreprise.com"
              />
              <div *ngIf="submitted && f['companyEmail'].errors" class="invalid-feedback">
                <div *ngIf="f['companyEmail'].errors['required']">L'email est requis</div>
                <div *ngIf="f['companyEmail'].errors['email']">Email invalide</div>
              </div>
            </div>
  
            <div class="form-group">
              <label for="companyFax">
                <i class="fas fa-fax"></i>
                Numéro de fax
              </label>
              <input
                type="text"
                id="companyFax"
                formControlName="companyFax"
                class="form-control"
                [ngClass]="{ 'is-invalid': submitted && f['companyFax'].errors }"
                placeholder="+216 XX XXX XXX"
              />
              <div *ngIf="submitted && f['companyFax'].errors" class="invalid-feedback">
                <div *ngIf="f['companyFax'].errors['required']">Le numéro de fax est requis</div>
              </div>
            </div>
          </div>
        </div>
  
        <!-- Informations de l'enquêteur -->
        <div class="form-section">
          <div class="section-header">
            <i class="fas fa-user-tie"></i>
            <h3>Informations de la personne responsable</h3>
          </div>
  
          <div class="form-grid">
            <div class="form-group">
              <label for="investigatorName">
                <i class="fas fa-user"></i>
                 Nom et prenom 
              </label>
              <input
                type="text"
                id="investigatorName"
                formControlName="investigatorName"
                class="form-control"
                [ngClass]="{ 'is-invalid': submitted && f['investigatorName'].errors }"
                placeholder="Prénom et nom"
              />
              <div *ngIf="submitted && f['investigatorName'].errors" class="invalid-feedback">
                <div *ngIf="f['investigatorName'].errors['required']">Le nom de l'enquêteur est requis</div>
              </div>
            </div>
  
            <div class="form-group">
              <label for="investigatorPhone">
                <i class="fas fa-phone"></i>
                Numéro de téléphone
              </label>
              <input
                type="tel"
                id="investigatorPhone"
                formControlName="investigatorPhone"
                class="form-control"
                [ngClass]="{ 'is-invalid': submitted && f['investigatorPhone'].errors }"
                placeholder="+216 XX XXX XXX"
              />
              <div *ngIf="submitted && f['investigatorPhone'].errors" class="invalid-feedback">
                <div *ngIf="f['investigatorPhone'].errors['required']">Le numéro est requis</div>
                <div *ngIf="f['investigatorPhone'].errors['pattern']">Format invalide</div>
              </div>
            </div>
  
            <div class="form-group">
              <label for="investigatorEmail">
                <i class="fas fa-at"></i>
                Email de la personne responsable
              </label>
              <input
                type="email"
                id="investigatorEmail"
                formControlName="investigatorEmail"
                class="form-control"
                [ngClass]="{ 'is-invalid': submitted && f['investigatorEmail'].errors }"
                placeholder="email@example.com"
              />
              <div *ngIf="submitted && f['investigatorEmail'].errors" class="invalid-feedback">
                <div *ngIf="f['investigatorEmail'].errors['required']">L'email est requis</div>
                <div *ngIf="f['investigatorEmail'].errors['email']">Email invalide</div>
              </div>
            </div>
          </div>
        </div>
  
        <!-- Code de vérification -->
        <div *ngIf="verificationStep" class="verification-section">
          <div class="section-header">
            <i class="fas fa-shield-alt"></i>
            <h3>Code de vérification</h3>
          </div>
          <div class="verification-content">
            <p class="verification-text">
              Un code de vérification a été envoyé à l'adresse email de l'entreprise.
            </p>
            <div class="form-group verification-code">
              <input
                type="text"
                id="verificationCode"
                formControlName="verificationCode"
                class="form-control"
                placeholder="Entrez le code à 6 chiffres"
                maxlength="6"
              />
            </div>
          </div>
        </div>
  
        <button type="button" (click)="verificationStep ? register() : sendVerificationCode()" class="btn-submit">
          <i class="fas" [class.fa-paper-plane]="!verificationStep" [class.fa-check-circle]="verificationStep"></i>
          {{ verificationStep ? 'Valider l\'inscription' : 'Envoyer le code de vérification' }}
        </button>
      </form>
    </div>
  </div>
  
